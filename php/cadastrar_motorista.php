<?php require 'config.php'; if ($_SERVER['REQUEST_METHOD'] !== 'POST') { header('Location: ../cadastro_motorista.html'); exit; } $nome = $_POST['nome']; $email = $_POST['email']; $senha = password_hash($_POST['senha'], PASSWORD_DEFAULT); $cnh = $_POST['cnh']; $id_veiculo = !empty($_POST['id_veiculo']) ? intval($_POST['id_veiculo']) : null; $pdo->prepare('INSERT INTO usuario (nome,email,senha,nivel_acesso) VALUES (?,?,?,"motorista")')->execute([$nome,$email,$senha]); $id = $pdo->lastInsertId(); $pdo->prepare('INSERT INTO motorista (id_usuario,cnh,id_veiculo) VALUES (?,?,?)')->execute([$id,$cnh,$id_veiculo]); echo 'Motorista cadastrado. <a href="../index.html">Voltar</a>'; ?>